<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>線上試衣間</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Huninn&family=Zen+Antique&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="subject.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="manifest" href="manifest.json" />
  </head>
  <body>
    <header><h1>線上試衣間</h1></header>
    <div class="main-content">
      <section id="flctn">
        <img id="preview-img" src="clothes/model.png" alt="預覽畫面" />
      </section>
      <aside>
        <h3>衣服類型</h3>
        <ul>
          <li class="has-submenu">
            上身
            <ul class="submenu">
              <li>
                短袖
                <img
                  src="縮圖圖片路徑"
                  data-preview="高解析預覽圖供javascript使用"
                  alt="短袖(圖片無法載入時)"
                  class="item-img"
                />
              </li>

              <li>背心</li>
              <li>長袖</li>
              <li>襯衫</li>
            </ul>
          </li>

          <li class="has-submenu">
            下身
            <ul class="submenu">
              <li>短褲</li>
              <li>長褲</li>
              <li>裙子</li>
              <li>牛仔</li>
            </ul>
          </li>
          <li class="has-submenu">
            外套
            <ul class="submenu">
              <li>休閒外套</li>
              <li>針織外套</li>
              <li>罩衫</li>
              <li>背心</li>
            </ul>
          </li>
          <li class="has-submenu">
            鞋子
            <ul class="submenu">
              <li>休閒鞋</li>
              <li>跟鞋</li>
              <li>涼鞋</li>
              <li>靴子</li>
            </ul>
          </li>
          <li class="has-submenu">
            配件
            <ul class="submenu">
              <li>帽子</li>
              <li>項鍊</li>
              <li>包包</li>
            </ul>
          </li>
        </ul>
      </aside>
    </div>
    <script>
      // --- PWA Service Worker 註冊碼 (保留) ---
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", function () {
          navigator.serviceWorker.register("/sw.js").then(
            function (registration) {
              console.log(
                "ServiceWorker registration successful: ",
                registration.scope
              );
            },
            function (err) {
              console.log("ServiceWorker registration failed: ", err);
            }
          );
        });
      }

      // --- 新增：選單展開/收合功能 (手風琴效果) ---
      const menuItems = document.querySelectorAll(".has-submenu");
      menuItems.forEach((item) => {
        item.addEventListener("click", function (event) {
          event.stopPropagation();
          menuItems.forEach((otherItem) => {
            if (otherItem !== this) {
              otherItem.classList.remove("active");
            }
          });
          this.classList.toggle("active");
        });
      });

      // --- 新增：圖片切換功能 ---
      // 確保 ID 是 #preview-img (與 HTML 中的 ID 匹配)
      const previewImage = document.getElementById("preview-img");
      const itemImages = document.querySelectorAll(".item-img");

      itemImages.forEach((img) => {
        img.addEventListener("click", function (event) {
          event.stopPropagation();
          // 使用 getAttribute 讀取 data-preview 屬性
          const previewSrc = this.getAttribute("data-preview");
          if (previewImage && previewSrc) {
            previewImage.src = previewSrc;
          }
        });
      });
    </script>
  </body>
</html>
